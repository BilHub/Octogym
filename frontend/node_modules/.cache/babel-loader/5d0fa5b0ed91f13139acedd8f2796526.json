{"ast":null,"code":"var _jsxFileName = \"/home/bil/Desktop/web projects/octopus/Octogym/frontend/src/jsx/components/planning/PlanningEdit.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from 'axios';\nimport { useGetAPI, usePutAPI } from '../useAPI'; // import PlanningProvider from './PlanningState'\n\nimport { set } from \"date-fns\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction refreshPage() {\n  window.location.reload(false);\n}\n\nconst PlanningEdit = props => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [name, setName] = useState(\"\");\n  const [salle_sport, setSalle_sport] = useState(\"\");\n  const currentPlanningId = props.match.params.id;\n  let planningURI = `${process.env.REACT_APP_API_URL}/rest-api/planning/${currentPlanningId}/`;\n  const history = useHistory();\n  useEffect(() => {\n    axios.get(planningURI).then(res => {\n      setName(res.data.name);\n      setSalle_sport(res.data.salle_sport);\n    });\n  }, []);\n  let salleEnd = `${process.env.REACT_APP_API_URL}/rest-api/salle-sport/`;\n  const salles = useGetAPI(salleEnd);\n\n  const HandleSubmit = e => {\n    _s();\n\n    e.preventDefault();\n    const newPlanning = {\n      name: name,\n      salle_sport: Number(salle_sport) //convert and pass the id as number \n\n    };\n    usePutAPI(planningURI, newPlanning);\n    history.push(\"/planning\");\n    refreshPage();\n  };\n\n  _s(HandleSubmit, \"WivCEu9iiLUvIGdN2icZma8eTWk=\", false, function () {\n    return [usePutAPI];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Modifier le planning de \", name, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: HandleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"salle_name\",\n            value: name,\n            name: \"name\",\n            className: \"form-control\",\n            autoComplete: \"name\",\n            onChange: e => setName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"cars\",\n            children: \"Selectionner une salle:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"salle_sport\",\n            className: \"form-control\",\n            id: \"cars\",\n            value: salle_sport,\n            onChange: e => setSalle_sport(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"option\",\n              children: \"Cliquez pour choisir\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 19\n            }, this), salles.map(salle => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: salle.id,\n              children: salle.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 25\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: \"Modifier\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(PlanningEdit, \"wiXuIoBQxPISAroibmdiL6yQLEY=\", false, function () {\n  return [useHistory, useGetAPI];\n});\n\n_c = PlanningEdit;\nexport default PlanningEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlanningEdit\");","map":{"version":3,"sources":["/home/bil/Desktop/web projects/octopus/Octogym/frontend/src/jsx/components/planning/PlanningEdit.js"],"names":["React","useState","useEffect","useContext","useHistory","axios","useGetAPI","usePutAPI","set","refreshPage","window","location","reload","PlanningEdit","props","name","setName","salle_sport","setSalle_sport","currentPlanningId","match","params","id","planningURI","process","env","REACT_APP_API_URL","history","get","then","res","data","salleEnd","salles","HandleSubmit","e","preventDefault","newPlanning","Number","push","target","value","map","salle"],"mappings":"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","sourcesContent":["import React, { useState , useEffect, useContext} from \"react\";\r\nimport {  useHistory } from \"react-router-dom\";\r\n\r\nimport axios from 'axios';\r\nimport { useGetAPI,  usePutAPI } from '../useAPI'\r\n// import PlanningProvider from './PlanningState'\r\nimport { set } from \"date-fns\";\r\n\r\nfunction refreshPage() {\r\n  window.location.reload(false);\r\n}\r\n\r\nconst PlanningEdit = (props) => {\r\n\r\n    const [name , setName] = useState(\"\");\r\n    const [salle_sport , setSalle_sport] = useState(\"\");\r\n    const currentPlanningId = props.match.params.id;\r\n    \r\n    let planningURI = `${process.env.REACT_APP_API_URL}/rest-api/planning/${currentPlanningId}/`\r\n\r\n    const history = useHistory();\r\n    useEffect(() => {\r\n      axios.get(planningURI).then((res) => {\r\n        setName(res.data.name)\r\n        setSalle_sport(res.data.salle_sport)\r\n    })\r\n    }, []);\r\n    let salleEnd = `${process.env.REACT_APP_API_URL}/rest-api/salle-sport/`\r\n     const salles = useGetAPI(salleEnd)\r\n\r\n    const HandleSubmit =  e => {\r\n      e.preventDefault();\r\n      const newPlanning = {\r\n        name:name, \r\n        salle_sport: Number(salle_sport)//convert and pass the id as number \r\n      }\r\n        usePutAPI(planningURI, newPlanning)\r\n        history.push(\"/planning\")\r\n        refreshPage()\r\n      }\r\n    return (\r\n        <div>\r\n          <h1>Modifier le planning de {name} </h1>\r\n          <form onSubmit={HandleSubmit}>\r\n            <div className=\"form-row\">\r\n            <div className=\"form-group col-md-6\">\r\n            <label>name</label>\r\n              <input type=\"text\" id=\"salle_name\" value={name} name=\"name\"  className=\"form-control\" autoComplete=\"name\" onChange={e => setName(e.target.value)} />\r\n            </div>\r\n              <div className=\"form-group col-md-6\">\r\n                <label for=\"cars\">Selectionner une salle:</label>\r\n                <select name=\"salle_sport\"  className=\"form-control\" id=\"cars\" value={salle_sport} onChange={e => setSalle_sport(e.target.value)}>\r\n                  <option value=\"option\" >Cliquez pour choisir</option>\r\n                    { salles.map(salle =>\r\n                        <option value={salle.id}>{salle.name}</option>\r\n                    )}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <br/>\r\n            <button type=\"submit\" className=\"btn btn-primary\">\r\n              Modifier\r\n            </button>\r\n          </form>\r\n        </div>\r\n    )\r\n}\r\nexport default PlanningEdit;"]},"metadata":{},"sourceType":"module"}