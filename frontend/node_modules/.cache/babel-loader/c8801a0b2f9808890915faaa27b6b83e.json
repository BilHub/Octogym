{"ast":null,"code":"var _jsxFileName = \"/home/bil/Desktop/web projects/octopus/Octogym/frontend/src/jsx/components/abonnement/AbonnementCreate.jsx\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { useGetAPI, usePostAPI } from '../useAPI';\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction refreshPage() {\n  window.location.reload(false);\n}\n\nconst AbonnementCreate = props => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  let activityEnd = `${process.env.REACT_APP_API_URL}/rest-api/salle-activite/activite/`;\n  const activities = useGetAPI(activityEnd); // let presenceURI = `${process.env.REACT_APP_API_URL}/rest-api/abonnement/${currentPresenceId}/`\n\n  const history = useHistory(); // const [abActivity, setAbActivity] = useState([]);\n\n  const [abName, setAbName] = useState('');\n  const [abPrice, setabPrice] = useState('');\n  const [abNumDays, setAbNumDays] = useState('');\n  const [abSeancesQuantity, setAbSeancesQuantity] = useState('');\n  const [selectedActivities, setSelectedActivities] = useState([]); //FK \n  // useEffect(() => {\n  //   axios.get(presenceURI).then((res) => {\n  //     setAbActivity(res.data.activity)\n  //     setAbName(res.data.name)\n  //     setabPrice(res.data.price)\n  //     setAbNumDays(res.data.number_of_days)\n  //     setAbSeancesQuantity(res.data.seances_quantity)\n  //     setAbActivityName(res.data.activity_name)\n  //     setAbNumClients(res.data.clients_number)\n  //     console.log('the Presence instance is ======>', res.data);\n  // })\n  // }, []);\n  // const setNewAbonnement = () => {\n  //   if (creneau  === '') {\n  //     const newClient = {\n  //       hour_entree:hour_entree,\n  //       hour_sortie:hour_sortie,\n  //     }\n  //     return newClient\n  //   }else {\n  //     const newClient = {\n  //       hour_entree:hour_entree,\n  //       hour_sortie:hour_sortie,\n  //       creneau : Number(creneau)\n  //     }\n  //     return newClient\n  //   }\n  // }\n\n  const handleCheckbox = event => {\n    const activity = event.target.name;\n\n    if (event.target.checked) {\n      setSelectedActivities(checkedActivities => [...checkedActivities, Number(activity)]);\n      console.log('maladiieiieiis=======>', selectedActivities);\n    } else {\n      for (var i = 0; i < selectedActivities.length; i++) {\n        if (selectedActivities[i] === Number(activity)) {\n          selectedActivities.splice(i, 1);\n        }\n      }\n\n      selectedActivities.splice(Number(activity), 1);\n      console.log('unchecked=======>', selectedActivities);\n    }\n  };\n\n  const HandleSubmit = async e => {\n    _s();\n\n    console.log(\"setSelectedMaladie=======> \", selectedActivities); // console.log('les maladiiiies', maladies);\n\n    let endpoint = `${process.env.REACT_APP_API_URL}/rest-api/abonnement/create`;\n    e.preventDefault();\n    const newAbonnement = {\n      activity: selectedActivities,\n      name: abName,\n      price: abPrice,\n      number_of_days: abNumDays,\n      seances_quantity: abSeancesQuantity\n    };\n    usePostAPI(endpoint, newAbonnement);\n    history.push(\"/client\");\n    console.log('THE NEW CLIENT ', newAbonnement);\n  };\n\n  _s(HandleSubmit, \"Lyk8Kka0FEUUhqQ22XA/nGDvb5M=\", false, function () {\n    return [usePostAPI];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header justify-content-between\",\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"card-title\",\n          children: \"Creer un nouvel Abonnement  \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"basic-form\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: HandleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Libell\\xE9 \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"last_name\",\n                  className: \"form-control\",\n                  placeholder: \"Nom de l'abonnement \",\n                  onChange: e => setAbName(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Prix\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  name: \"first_name\",\n                  className: \"form-control\",\n                  placeholder: \"prix \",\n                  onChange: e => setabPrice(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Nombre de jours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"first_name\",\n                  className: \"form-control\",\n                  placeholder: \"ex : 30\",\n                  onChange: e => setAbNumDays(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group col-md-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Nombre de S\\xE9ances \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  name: \"last_name\",\n                  className: \"form-control\",\n                  placeholder: \"ex: 8\",\n                  onChange: e => setAbSeancesQuantity(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Activit\\xE9es\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: activities.map(acti => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-6\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"custom-control custom-checkbox mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"checkbox\",\n                        name: acti.id,\n                        className: \"custom-control-input\",\n                        id: acti.id,\n                        onClick: handleCheckbox\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 131,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"custom-control-label\",\n                        htmlFor: acti.id,\n                        children: [\" \", acti.name]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 132,\n                        columnNumber: 35\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 130,\n                      columnNumber: 33\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              children: \"Creer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(AbonnementCreate, \"+YOWCK0onVE/rY+kNziSyhXZNwE=\", false, function () {\n  return [useGetAPI, useHistory];\n});\n\n_c = AbonnementCreate;\nexport default AbonnementCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"AbonnementCreate\");","map":{"version":3,"sources":["/home/bil/Desktop/web projects/octopus/Octogym/frontend/src/jsx/components/abonnement/AbonnementCreate.jsx"],"names":["React","useState","useEffect","axios","useGetAPI","usePostAPI","useHistory","refreshPage","window","location","reload","AbonnementCreate","props","activityEnd","process","env","REACT_APP_API_URL","activities","history","abName","setAbName","abPrice","setabPrice","abNumDays","setAbNumDays","abSeancesQuantity","setAbSeancesQuantity","selectedActivities","setSelectedActivities","handleCheckbox","event","activity","target","name","checked","checkedActivities","Number","console","log","i","length","splice","HandleSubmit","e","endpoint","preventDefault","newAbonnement","price","number_of_days","seances_quantity","push","value","map","acti","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from 'axios';\r\n\r\nimport { useGetAPI, usePostAPI } from '../useAPI'\r\nimport {  useHistory } from \"react-router-dom\";\r\n\r\n \r\nfunction refreshPage() {\r\n  window.location.reload(false);\r\n}\r\nconst AbonnementCreate = (props) => {\r\n  let activityEnd = `${process.env.REACT_APP_API_URL}/rest-api/salle-activite/activite/`\r\n\r\n  const activities = useGetAPI(activityEnd)\r\n\r\n  // let presenceURI = `${process.env.REACT_APP_API_URL}/rest-api/abonnement/${currentPresenceId}/`\r\n  const history = useHistory();\r\n\r\n  // const [abActivity, setAbActivity] = useState([]);\r\n  const [abName, setAbName] = useState('')\r\n  const [abPrice, setabPrice] = useState('')\r\n  const [abNumDays, setAbNumDays] = useState('')\r\n  const [abSeancesQuantity, setAbSeancesQuantity] = useState('')\r\n  const [selectedActivities, setSelectedActivities] = useState([])\r\n \r\n  //FK \r\n  // useEffect(() => {\r\n  //   axios.get(presenceURI).then((res) => {\r\n    \r\n  //     setAbActivity(res.data.activity)\r\n  //     setAbName(res.data.name)\r\n  //     setabPrice(res.data.price)\r\n  //     setAbNumDays(res.data.number_of_days)\r\n  //     setAbSeancesQuantity(res.data.seances_quantity)\r\n  //     setAbActivityName(res.data.activity_name)\r\n  //     setAbNumClients(res.data.clients_number)\r\n  //     console.log('the Presence instance is ======>', res.data);\r\n  // })\r\n  // }, []);\r\n\r\n\r\n// const setNewAbonnement = () => {\r\n//   if (creneau  === '') {\r\n//     const newClient = {\r\n//       hour_entree:hour_entree,\r\n//       hour_sortie:hour_sortie,\r\n//     }\r\n//     return newClient\r\n//   }else {\r\n//     const newClient = {\r\n//       hour_entree:hour_entree,\r\n//       hour_sortie:hour_sortie,\r\n//       creneau : Number(creneau)\r\n\r\n//     }\r\n//     return newClient\r\n//   }\r\n// }\r\nconst handleCheckbox = (event) => {\r\n  const activity = event.target.name\r\n    if ( event.target.checked){\r\n      setSelectedActivities(checkedActivities => [...checkedActivities, Number(activity)])\r\n      console.log('maladiieiieiis=======>', selectedActivities);\r\n    }else {\r\n      for ( var i = 0 ; i < selectedActivities.length; i++){\r\n        if (selectedActivities[i] === Number(activity)){\r\n          selectedActivities.splice(i, 1)\r\n        } \r\n      }\r\n      selectedActivities.splice(Number(activity) , 1)\r\n      console.log('unchecked=======>', selectedActivities);\r\n  }\r\n}\r\n\r\n\r\n  const HandleSubmit = async e => {\r\n  \r\n    console.log(\"setSelectedMaladie=======> \", selectedActivities);\r\n\r\n  // console.log('les maladiiiies', maladies);\r\n  let endpoint = `${process.env.REACT_APP_API_URL}/rest-api/abonnement/create`\r\n  e.preventDefault();\r\n  const newAbonnement = {\r\n    activity:selectedActivities,\r\n    name:abName,\r\n    price:abPrice,\r\n    number_of_days:abNumDays,\r\n    seances_quantity:abSeancesQuantity,\r\n  }\r\n    usePostAPI(endpoint, newAbonnement)\r\n    history.push(\"/client\")\r\n    console.log('THE NEW CLIENT ', newAbonnement);\r\n  }\r\n  return (\r\n        <div className=\"\">\r\n          <div className=\"card\">\r\n            <div className=\"card-header justify-content-between\">\r\n              <h4 className=\"card-title\">Creer un nouvel Abonnement  </h4>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              <div className=\"basic-form\">\r\n                <form onSubmit={HandleSubmit}>\r\n                  <div className=\"form-row\">\r\n                    <div className=\"form-group col-md-4\">\r\n                      <label>Libellé </label>\r\n                      <input type=\"text\" name=\"last_name\" className=\"form-control\" placeholder=\"Nom de l'abonnement \" onChange={e => setAbName(e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"form-group col-md-4\">\r\n                      <label>Prix</label>\r\n                      <input  type=\"number\" name=\"first_name\"  className=\"form-control\"  placeholder=\"prix \"onChange={e => setabPrice(e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"form-group col-md-4\">\r\n                      <label>Nombre de jours</label>\r\n                      <input  type=\"text\" name=\"first_name\"  className=\"form-control\"  placeholder=\"ex : 30\"onChange={e => setAbNumDays(e.target.value)}/>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-row\">\r\n                    <div className=\"form-group col-md-4\">\r\n                      <label>Nombre de Séances </label>\r\n                      <input type=\"number\" name=\"last_name\" className=\"form-control\" placeholder=\"ex: 8\" onChange={e => setAbSeancesQuantity(e.target.value)}/>\r\n                    </div>\r\n                    \r\n                  <div className=\"col-6\">\r\n                  <label>\r\n                      Activitées\r\n                    </label>\r\n                    <div className=\"row\">\r\n                          { activities.map(acti =>\r\n                          <div className=\"col-6\">\r\n                                <div className=\"custom-control custom-checkbox mb-3\">\r\n                                  <input type=\"checkbox\" name={acti.id} className=\"custom-control-input\" id={acti.id}  onClick={handleCheckbox}/>\r\n                                  <label className=\"custom-control-label\" htmlFor={acti.id}> {acti.name}</label>\r\n                                </div>\r\n                          </div>\r\n                          )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                  <button type=\"submit\" className=\"btn btn-primary\">\r\n                    Creer\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      \r\n  )\r\n}\r\nexport default AbonnementCreate;\r\n"]},"metadata":{},"sourceType":"module"}